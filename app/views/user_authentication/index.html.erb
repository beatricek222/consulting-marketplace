
<h1>
  List of all users
</h1>

<div>
  <div>
    <table class="table table-hover" style="border-radius: 30px">
    <thead>
      <tr class="table-info">
        <th>
          Name
        </th>

        <th>
          Role
        </th>

        <th>
          Description
        </th>

        <th>
          Details
        </th>

        <th>
        Favorite
        </th>

        <th>
        Contact
        </th>
      </tr>
      </thead>
      <tbody>
      <% @list_of_users.each do |a_user| %>
      <tr>
        <td>
          <%= a_user.full_name %>
        </td>

        <td>
          <%= a_user.role.title %>
        </td>

        <td>
          <%= a_user.description %>
        </td>
        <td>
          <a href="/marketplace/<%= a_user.id %>">
            Show details
          </a>
        </td>

        <td>
    <% current_user_favorites = Favorite.where({:other_user_id => a_user.id, :user_id => session[:user_id]}) %>

    <%the_favorite = current_user_favorites[0]%>

    <%if the_favorite == nil %>
    <form action="/insert_favorite" method="post">
    <input type="hidden" name="query_other_user_id" value="<%=a_user.id%>">
    <button class="btn btn-warning">Favorite!</button>
    </form>
    <%else%>
      <a href="/delete_favorite/<%=the_favorite.id%>" class="btn btn-outline-warning" style="color: #D79334;">Un-favorite</a>
    <%end%>
        </td>

        <td>
    <% current_user_contacteds = Contacted.where({:other_user_id => a_user.id, :user_id => session[:user_id]}) %>

    <%the_contacted = current_user_contacteds[0]%>

    <%if the_contacted == nil %>
    <form action="/insert_contacted" method="post">
    <input type="hidden" name="query_other_user_id" value="<%=a_user.id%>">
    <button class="btn btn-info">Contact!</button>
    </form>
    <%else%>
      <div class="btn" style="btn-outline-info">Contacted</div>
    <%end%>
        </td>
      </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
